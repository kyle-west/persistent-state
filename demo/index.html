<html>
  <head>
    <link rel="import" href="../persistent-state.html">
    <script src="./custom-webcomponent.js"></script>
    <script src="./json-wc.js"></script>
  </head>

  <body>
    <section>
      <h3>Regular Input/Textbox</h3>
      <textarea id=""></textarea>
      <br>
      <input id="" type="text">
    </section>
    
    <section>
      <persistent-state id="simple-elements" name="bacon">
        <h3>Default <code>&lt;persistent-state&gt;</code> Input/Textbox</h3>
        <input id="test" type="text">
      </persistent-state>
      <br>
      <persistent-state>
        <textarea></textarea>
      </persistent-state>
    </section>
    
    <section>
      <h3>Session Only <code>&lt;persistent-state&gt;</code> Input/Textbox</h3>
      <persistent-state type="session">
        <input type="text">
      </persistent-state>
      <br>
      <persistent-state type="session">
        <textarea></textarea>
      </persistent-state>
    </section>
    
    <section>
      <persistent-state id="nested-elements" name="bacon">
        <h3>Nested in the DOM</h3>
        <div>
          <div>
            <div>
              <div>
                <input type="text">
              </div>
              <input type="text">
            </div>
            <textarea></textarea>
            <input type="text">
          </div>
          <input type="text">
        </div>
      </persistent-state>
    </section>
    
    <section>
      <h3><code>&lt;persistent-state&gt;</code> Complex Input Types</h3>
      <persistent-state id="complex-states">
        <h4>Selection Types</h4>
        checkbox: <input type="checkbox"><br>
        radio buttons: 
        <input type="radio" name="this-that-or-the-other" id="o1" value="this"><label for="o1">This</label>
        <input type="radio" name="this-that-or-the-other" id="o2" value="that"><label for="o2">That</label>
        <input type="radio" name="this-that-or-the-other" id="o3" value="the other"><label for="o3">Or the Other</label>
        <br>

        <h4>Other Types</h4>
        color: <input type="color"><br>
        date: <input type="date"><br>
        datetime-local: <input type="datetime-local"><br>
        email: <input type="email"><br>
        month: <input type="month"><br>
        number: <input type="number"><br>
        password: <input type="password"><br>
        range: <input type="range"><br>
        search: <input type="search"><br>
        tel: <input type="tel"><br>
        text: <input type="text"><br>
        time: <input type="time"><br>
        url: <input type="url"><br>
        week: <input type="week">
      </persistent-state>
    </section>

    <section>
      <h3><code>&lt;input type="hidden"&gt;</code></h3>
      <p><em>Open the terminal and evaluate <code>hiddenInputElem</code></em> to test this feature.</p>
      <persistent-state>
        <input type="hidden" id="hidden-input">
      </persistent-state>
    </section>
    
    <section>
      <hr>
      <h3><code>Custom WebComponents</code></h3>
      <persistent-state id="custom-wc">
        <this-is-a-custom-wc></this-is-a-custom-wc>
      </persistent-state>
      <persistent-state id="custom-wc-json">
        <json-wc></json-wc>
      </persistent-state>
    </section>


    <section>
      <hr>
      <h3>Not Supported</h3>
      <persistent-state>
        <h4>Selection Types</h4>
        submit: <input type="submit"><br>
        reset: <input type="reset"><br>
        button: <input type="button"><br>
        file: <input type="file"><br>
        image: <input type="image"><br>
      </persistent-state>
    </section>


    <script>
      window.hiddenInputElem = document.getElementById('hidden-input');

      new PersistentStateRegistry().registerCustomElement({
        name: 'this-is-a-custom-wc',
        updateProperty: 'customValue',
        changeEvent: 'this-is-a-custom-wc::input',
        onChange: (customEvent) => {
          return customEvent.detail.internalInputValue
        }
      });

      new PersistentStateRegistry().registerCustomElement({
        name: 'json-wc',
        updateProperty: 'state',
        isJSON: true,
        changeEvent: 'json-wc::click',
        onChange: (customEvent) => {
          let { state } = customEvent.detail
          return Object.assign({}, state, {loadedFromMemory: true})
        }
      });
    </script>
  </body>
</html>